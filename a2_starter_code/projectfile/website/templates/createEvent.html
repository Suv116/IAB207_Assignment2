{% extends "layout.html" %}

{% block content %}
<div class="container mt-5">
    <div class="concert-section mask d-flex align-items-center h-100 gradient-custom-3">
        <div class="container h-100">
            <div class="row justify-content-center align-items-center h-100">
                <div class="col-md-8 mx-auto">
                    <div class="card" style="border-radius: 15px;">
                        <div class="card-body p-5">
                            <h2 class="text-center mb-5">Create a Rock Concert</h2>

                            <form method="POST" action="{{ url_for('event.create_event') }}"
                                  enctype="multipart/form-data">

                                {% for category, message in get_flashed_messages(with_categories=true) %}
                                <div class="alert alert-{{ category }}" role="alert">
                                    {{ message }}
                                </div>
                                {% endfor %}

                                <!-- Concert Name -->
                                <div class="section-header">Concert Name</div>
                                <input type="text" name="title" class="form-control form-control-lg"
                                       placeholder="Concert Name"/>

                                <!-- Expected Attendees -->
                                <div class="section-header">Expected Attendees</div>
                                <input type="number" name="attendees" class="form-control form-control-lg"
                                       placeholder="Expected number of attendees"/>

                                <!-- Organisation Type -->
                                <div class="section-header">Organisation Type</div>
                                <select name="organisation" class="form-control form-control-lg">
                                    <option selected disabled>What best describes your organisation?</option>
                                    <option value="independent">Independent Artist</option>
                                    <option value="band">Band</option>
                                    <option value="label">Music Label</option>
                                    <option value="promoter">Event Promoter</option>
                                </select>

                                <!-- Date -->
                                <div class="section-header">Date</div>
                                <input type="date" name="date" class="form-control form-control-lg"/>

                                <!-- Start Time -->
                                <div class="section-header">Start Time</div>
                                <input type="time" name="start_time" class="form-control form-control-lg"/>

                                <!-- End Time -->
                                <div class="section-header">End Time</div>
                                <input type="time" name="end_time" class="form-control form-control-lg"/>

                                <!-- Genres -->
                                <div class="section-header">Genre</div>
                                <select name="genre" class="form-control form-control-lg">
                                    <option selected disabled>Select genre</option>
                                    <option value="grunge">Grunge</option>
                                    <option value="metal">Metal</option>
                                    <option value="tribute">Tribute</option>
                                    <option value="classic">Classic</option>
                                    <option value="70s">70s</option>
                                    <option value="80s">80s</option>
                                    <option value="90s">90s</option>
                                    <option value="00s">00s</option>
                                    <option value="southern">Southern</option>
                                    <option value="psychedlic">Psychedlic</option>
                                </select>

                                <!-- Ticket Prices -->
                                <div class="section-header">Tickets</div>

                                <div id="ticket-section">
                                    <div class="ticket-entry mb-3">
                                        <input type="text" name="ticket_type[]"
                                               class="form-control form-control-lg mb-2"
                                               placeholder="Ticket type (e.g. General Admission)"/>
                                        <input type="number" name="price[]" class="form-control form-control-lg"
                                               placeholder="Price ($)"/>
                                    </div>
                                </div>

                                <button type="button" id="add-ticket" class="btn btn-outline-primary btn-sm mt-2">
                                    + Add another ticket type
                                </button>

                                <script>
                                    document.addEventListener("DOMContentLoaded", function () {
                                        const addTicketBtn = document.getElementById("add-ticket");
                                        const ticketSection = document.getElementById("ticket-section");

                                        addTicketBtn.addEventListener("click", function () {
                                            const ticketEntry = document.createElement("div");
                                            ticketEntry.classList.add("ticket-entry", "mb-3");
                                            ticketEntry.innerHTML = `
            <input type="text" name="ticket_type[]" class="form-control form-control-lg mb-2"
                   placeholder="Ticket type (e.g. VIP)"/>
            <input type="number" name="price[]" class="form-control form-control-lg"
                   placeholder="Price ($)"/>
            <button type="button" class="btn btn-sm btn-outline-danger mt-2 remove-ticket">Remove</button>
        `;
                                            ticketSection.appendChild(ticketEntry);
                                        });

                                        document.body.addEventListener("click", function (e) {
                                            if (e.target.classList.contains("remove-ticket")) {
                                                e.target.parentElement.remove();
                                            }
                                        });
                                    });
                                </script>


                                <!-- Venue -->
                                <div class="section-header">Venue</div>
                                <input type="text" name="venue" class="form-control form-control-lg"
                                       placeholder="Venue location"/>

                                <!-- Description -->
                                <div class="section-header">Description</div>
                                <textarea name="description" class="form-control form-control-lg" rows="3"
                                          placeholder="Concert description"></textarea>

                                <!-- Main Img -->
                                <div class="section-header">Main Image</div>
                                <input type="file" name="photo" class="form-control form-control-lg"/>

                                <!-- Carousel Img -->
                                <div class="section-header">Carousel Images</div>
                                <input type="file" name="carousel_images" class="form-control form-control-lg"
                                       multiple/>

                                <small class="form-text text-muted mt-1">
                                    Recommended image ratio: approximately <strong>2 : 1</strong> (e.g., 1200×600px or
                                    1920×800px)
                                </small>

                                <!-- Submit -->
                                <div class="d-flex justify-content-center mt-4">
                                    <button type="submit"
                                            class="btn btn-success btn-block btn-lg gradient-custom-4 text-body">
                                        Create Concert
                                    </button>
                                </div>
                            </form>


                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}}
